# AI 超级个体开发助手 v1.0 - 产品需求文档

> **版本**: v1.0
> **日期**: 2025-12-14
> **状态**: 需求确认中

---

## 一、产品愿景

### 1.1 一句话描述

**为超级个体提供从需求到部署的完整人机协作开发闭环。**

### 1.2 核心定位

| 维度         | 定义                                                             |
| ------------ | ---------------------------------------------------------------- |
| **产品类型** | 方法论 + 工具 + 规范                                             |
| **目标平台** | Claude CLI（当前阶段），后期扩展 Gemini CLI,Codex CLI 等更多平台 |
| **用户定位** | 一个人完成软件全流程的开发者                                     |
| **核心价值** | 人类主导决策，AI 执行产出，审核保证质量                          |

### 1.3 人机分工

```
┌─────────────────────────────────────────────────────────────────┐
│                        超级个体工作流                             │
├─────────────────────────────────────────────────────────────────┤
│  人类职责              AI职责              协作点                 │
│  ─────────            ─────────          ─────────              │
│  ✓ 输出需求            ✓ 生成文档          ⟷ 审核文档            │
│  ✓ 决策判断            ✓ 编写代码          ⟷ 验证测试            │
│  ✓ 最终验收            ✓ 写测试            ⟷ 执行部署            │
│  ✓ 变更发起            ✓ 生成部署文档                            │
└─────────────────────────────────────────────────────────────────┘
```

**核心原则**：

- **人类保留决策权和控制权** - 技术选型、功能优先级、质量标准由人类决定
- **AI 提供执行力和一致性** - 文档生成、代码编写、测试用例由 AI 完成
- **审核机制分层**：
  - **文档审核** - 需求文档、架构文档、部署文档需要人类审核确认
  - **代码验证** - 代码不需要人类审核，通过测试验证质量（详见研发和测试阶段）

---

## 二、目标用户

### 2.1 用户画像

```yaml
名称: 超级个体开发者

典型特征:
  - 一个人同时承担产品、研发、测试、运维角色
  - 有一定开发经验，熟悉至少一种技术栈
  - 使用 AI 辅助开发，但缺乏系统化方法
  - 追求效率，但不愿牺牲质量

典型场景:
  - 技术创业者开发 MVP
  - 独立开发者维护个人项目
  - 企业内部工具的单人开发

核心诉求:
  - 不遗漏关键步骤
  - 减少重复性工作
  - 保持产出质量
  - 随时掌握进度
```

### 2.2 用户痛点

| 痛点                  | 描述                       | 影响                     | 解决方案                |
| --------------------- | -------------------------- | ------------------------ | ----------------------- |
| **P1: 流程断裂**      | 从需求到上线没有完整的闭环 | 容易遗漏步骤，质量不稳定 | 定义完整的 5 阶段闭环   |
| **P2: AI 产出不可控** | AI 生成内容没有审核机制    | 问题累积，后期返工       | 每阶段设置审核点        |
| **P3: 变更难追踪**    | 需求变更后不知道影响范围   | 改漏、改错、重复工作     | 变更影响分析 + 自动追踪 |
| **P4: 状态不透明**    | 不知道项目当前在什么阶段   | 焦虑、混乱、低效         | 实时状态追踪            |

---

## 三、功能架构

### 3.1 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                      工具架构                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌────────────────────────────────────────────────────────┐    │
│  │  用户界面层（Claude CLI）                               │    │
│  │  ─────────────────────────────────────────────────────│    │
│  │  Slash Commands:                                       │    │
│  │    /init, /new-iteration, /start-requirements,        │    │
│  │    /approve, /report-issue, /status ...               │    │
│  └────────────────────────────────────────────────────────┘    │
│                            ↓                                    │
│  ┌────────────────────────────────────────────────────────┐    │
│  │  核心引擎层                                             │    │
│  │  ─────────────────────────────────────────────────────│    │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐│    │
│  │  │ 状态管理引擎 │  │ 流程控制引擎 │  │ 影响分析引擎 ││    │
│  │  │              │  │              │  │              ││    │
│  │  │ - state.json │  │ - 阶段流转  │  │ - 依赖分析  ││    │
│  │  │ - 读写操作   │  │ - 审批点    │  │ - 产物追踪  ││    │
│  │  │ - Git 集成   │  │ - 流程恢复  │  │ - 任务生成  ││    │
│  │  └──────────────┘  └──────────────┘  └──────────────┘│    │
│  └────────────────────────────────────────────────────────┘    │
│                            ↓                                    │
│  ┌────────────────────────────────────────────────────────┐    │
│  │  文档与脚本层                                           │    │
│  │  ─────────────────────────────────────────────────────│    │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐│    │
│  │  │ 文档模板     │  │ 自动化脚本   │  │ 规范指令     ││    │
│  │  │              │  │              │  │              ││    │
│  │  │ - PRD.md     │  │ - init.sh    │  │ - 流程规范  ││    │
│  │  │ - 架构.md    │  │ - test.sh    │  │ - 命名规范  ││    │
│  │  │ - API.md     │  │ - deploy.sh  │  │ - Git规范   ││    │
│  │  └──────────────┘  └──────────────┘  └──────────────┘│    │
│  └────────────────────────────────────────────────────────┘    │
│                            ↓                                    │
│  ┌────────────────────────────────────────────────────────┐    │
│  │  数据持久化层                                           │    │
│  │  ─────────────────────────────────────────────────────│    │
│  │  .solodev/                                             │    │
│  │    ├─ state.json         (项目状态)                    │    │
│  │    ├─ templates/         (文档模板)                    │    │
│  │    └─ scripts/           (自动化脚本)                  │    │
│  │                                                        │    │
│  │  docs/                                                 │    │
│  │    ├─ PRD/               (需求文档)                    │    │
│  │    ├─ architecture/      (架构文档)                    │    │
│  │    └─ deployment/        (部署文档)                    │    │
│  └────────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 模块划分

| 模块名           | 职责                                       | 详细PRD                          |
| ---------------- | ------------------------------------------ | -------------------------------- |
| **核心流程模型** | 定义双层迭代模型、五阶段流转、反馈循环机制 | docs/PRD/modules/核心流程模型-PRD.md |
| **状态管理模块** | 管理项目状态、迭代状态、阶段状态、模块状态 | docs/PRD/modules/状态管理模块-PRD.md |
| **命令体系模块** | 解析Slash Commands、触发对应流程          | docs/PRD/modules/命令体系模块-PRD.md |
| **影响分析模块** | 分析需求变更影响范围、生成待办任务         | docs/PRD/modules/影响分析模块-PRD.md |
| **文档模板模块** | 基于模板生成需求、架构、测试、部署文档     | docs/PRD/modules/文档模板模块-PRD.md |
| **测试验证模块** | 生成并执行单元测试、E2E测试、性能测试      | docs/PRD/modules/测试验证模块-PRD.md |
| **Git集成模块**  | 自动提交状态变更、打版本Tag                | docs/PRD/modules/Git集成模块-PRD.md  |

**说明**：每个模块的详细需求、数据模型、用户故事、验收标准详见对应的模块PRD文档。

---

## 四、产品交付全流程设计

### 4.1 双层迭代模型

#### 4.1.1 核心理念

**迭代 = 版本**：每个迭代对应一个版本号（v1.0, v1.1, v1.2...），迭代结束即部署上线。

**双层结构**：
- **迭代层（宏观）**：管理版本演进（Iteration 1 → Iteration 2 → Iteration 3）
- **迭代内层（微观）**：管理单次迭代内的五阶段流转 + 反馈循环

```
┌─────────────────────────────────────────────────────────────────┐
│                       双层迭代模型                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  【迭代层 - 宏观视角】                                           │
│  ────────────────────────────────────────────────────────────  │
│                                                                 │
│  Iteration 1 (v1.0 - MVP)                                      │
│    目标: 用户登录 + 基础订单                                     │
│    模块: [用户模块, 订单模块]                                    │
│    状态: completed → 已部署                                     │
│                                                                 │
│  Iteration 2 (v1.1 - 功能增强)                                  │
│    目标: 支付集成 + 用户模块增强                                 │
│    变更: 新增[支付模块], 变更[用户模块]                          │
│    状态: in_progress                                            │
│      ↓                                                          │
│      进入迭代内层 ─────────────┐                                │
│                               │                                │
│  ┌────────────────────────────┼────────────────────────────┐  │
│  │ 【迭代内层 - 微观视角】     │                            │  │
│  │ ────────────────────────── ↓                            │  │
│  │                                                         │  │
│  │  阶段1: 需求分析                                         │  │
│  │  ┌─────────────────────────────────────────────────┐   │  │
│  │  │ 人类输入: 需求描述                               │   │  │
│  │  │ AI执行:  需求澄清 → 生成PRD → 生成用户故事       │   │  │
│  │  │ 审批点:  文档生成后等待人类审批 ✓                │   │  │
│  │  │ 产物:   docs/PRD/ (全局PRD + 模块PRD)           │   │  │
│  │  └─────────────────────────────────────────────────┘   │  │
│  │                      ↓                                  │  │
│  │  阶段2: 架构设计                                         │  │
│  │  ┌─────────────────────────────────────────────────┐   │  │
│  │  │ 人类输入: 技术约束                               │   │  │
│  │  │ AI执行:  生成架构图 → 技术选型 → API设计         │   │  │
│  │  │ 审批点:  文档生成后等待人类审批 ✓                │   │  │
│  │  │ 产物:   docs/architecture/                      │   │  │
│  │  │                                                 │   │  │
│  │  │ 【反馈循环A】架构设计阶段发现需求问题             │   │  │
│  │  │   ↓ 触发变更分析                                 │   │  │
│  │  │   ├─ AI分析影响范围                              │   │  │
│  │  │   ├─ 人类确认回滚 ✓                              │   │  │
│  │  │   └─ 回滚到需求分析阶段，重新走流程               │   │  │
│  │  └─────────────────────────────────────────────────┘   │  │
│  │                      ↓                                  │  │
│  │  阶段3: 代码实现                                         │  │
│  │  ┌─────────────────────────────────────────────────┐   │  │
│  │  │ AI执行:  生成代码 → 单元测试                     │   │  │
│  │  │ 验证点:  单元测试通过（自动验证，无需人类审批）   │   │  │
│  │  │ 产物:   src/, tests/unit/                       │   │  │
│  │  └─────────────────────────────────────────────────┘   │  │
│  │                      ↓                                  │  │
│  │  阶段4: 测试验证                                         │  │
│  │  ┌─────────────────────────────────────────────────┐   │  │
│  │  │ AI执行:  生成E2E测试 → 生成性能测试              │   │  │
│  │  │ 审批点:  测试文档生成后等待人类审批 ✓             │   │  │
│  │  │ 执行:   运行所有测试                             │   │  │
│  │  │                                                 │   │  │
│  │  │ 【反馈循环B】测试失败（主要场景）                 │   │  │
│  │  │   ↓ 触发问题分析                                 │   │  │
│  │  │   ├─ AI分析根因（需求/架构/代码）                │   │  │
│  │  │   ├─ AI分析影响范围                              │   │  │
│  │  │   ├─ AI生成待办任务                              │   │  │
│  │  │   ├─ 人类确认变更方案 ✓                          │   │  │
│  │  │   └─ 回滚到对应阶段，重新走流程                   │   │  │
│  │  │                                                 │   │  │
│  │  │ 产物:   tests/e2e/, tests/performance/          │   │  │
│  │  └─────────────────────────────────────────────────┘   │  │
│  │                      ↓ (测试全部通过)                    │  │
│  │  阶段5: 部署                                             │  │
│  │  ┌─────────────────────────────────────────────────┐   │  │
│  │  │ AI执行:  生成部署文档 → CI/CD配置                │   │  │
│  │  │ 审批点:  部署方案等待人类审批 ✓                  │   │  │
│  │  │ 执行:   部署到生产环境 → Git Tag                 │   │  │
│  │  │ 产物:   deploy/, .github/workflows/             │   │  │
│  │  └─────────────────────────────────────────────────┘   │  │
│  │                      ↓                                  │  │
│  │                 迭代完成，返回迭代层                     │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 4.1.2 核心机制

| 机制           | 说明                                                           |
| -------------- | -------------------------------------------------------------- |
| **审批点**     | 需求文档、架构文档、测试文档、部署方案需人类审批后才能继续     |
| **自动验证**   | 代码实现阶段通过单元测试自动验证，无需人类审批                 |
| **反馈循环**   | 测试失败或架构设计发现问题时，触发影响分析，回滚到对应阶段     |
| **影响分析**   | AI 自动分析受影响模块、产物、依赖关系，生成待办任务            |
| **有条件并行** | 基础模块必须先完成当前阶段，依赖模块才能进入下一阶段           |
| **状态持久化** | 所有状态变更记录在 state.json，自动 Git commit                |
| **任务聚焦** | 每条命令定义明确的任务上下文，引导AI专注当前任务，避免注意力分散 |

### 4.2 任务聚焦机制

#### 4.2.1 设计理念

**核心目标**：确保AI在执行任务时专注于当前任务上下文，避免注意力分散导致任务质量下降。

**设计原则**：

| 原则 | 说明 |
|------|------|
| **引导而非限制** | 通过任务描述引导AI关注范围，而非技术手段限制文件访问 |
| **任务入口模型** | 命令是"任务入口"，定义AI应该关注什么，而非"权限边界" |
| **Prompt工程实现** | 通过命令文件中的任务描述实现聚焦，不依赖技术限制 |
| **灵活逃逸** | 提供扩展命令应对新场景，避免僵化设计 |

**为什么选择"任务聚焦模型"而非"文件权限模型"**：

```
文件权限模型的问题：
❌ 硬编码文件列表难以维护
❌ 无法预知所有可能需要的文件
❌ 技术限制增加系统复杂度
❌ 违背AI助手的灵活性本质

任务聚焦模型的优势：
✅ 通过任务描述自然引导AI注意力
✅ 保持AI的灵活性和判断能力
✅ 命令文件即文档，易于维护
✅ 符合Prompt工程最佳实践
```

#### 4.2.2 命令上下文定义

每个命令应定义以下四个维度的上下文：

| 维度 | 说明 | 示例 |
|------|------|------|
| **任务目标** | 本命令要完成什么 | "生成模块的架构设计文档" |
| **关注范围** | AI应主动读取的内容 | "该模块的PRD、已完成的架构文档、state.json" |
| **注意力边界** | AI不应主动读取的内容（除非必要） | "其他模块的实现代码、历史迭代数据" |
| **期望产出** | 命令执行后的交付物 | "架构文档（系统总览、数据模型、集成设计）" |

**命令文件模板**：

```markdown
# /start-architecture

## 任务目标
为当前模块生成架构设计文档。

## 关注范围（Focus Scope）
执行此任务时，请主动读取以下内容：
- .solodev/state.json（获取当前状态和模块信息）
- docs/PRD/modules/[当前模块]-PRD.md（该模块的需求文档）
- docs/architecture/iteration-X/（已完成的架构文档，用于保持一致性）
- .solodev/templates/architecture-*.md（架构文档模板）

## 注意力边界（Attention Boundary）
除非明确需要，请避免主动读取：
- src/（实现代码，架构阶段不需要）
- tests/（测试代码，架构阶段不需要）
- .solodev/state_his.json（历史数据，除非用户要求对比）
- 其他未完成架构的模块PRD（避免分散注意力）

## 期望产出
- docs/architecture/iteration-X/[模块名]-00-系统架构总览.md
- docs/architecture/iteration-X/[模块名]-数据模型设计.md
- docs/architecture/iteration-X/[模块名]-集成设计.md

## 执行流程
1. 读取state.json确定当前模块
2. 读取该模块的PRD文档
3. 读取架构文档模板
4. 生成架构文档
5. 更新state.json
6. 提交Git
```

#### 4.2.3 逃逸机制

为应对预定义命令无法覆盖的新场景，提供以下逃逸命令：

| 命令 | 用途 | 使用场景 |
|------|------|----------|
| `/custom-task` | 创建自定义任务 | 预定义命令无法满足的新场景 |
| `/expand-context` | 临时扩展上下文 | 当前任务需要读取注意力边界外的内容 |

**`/custom-task` 使用示例**：

```
用户: /custom-task "分析核心流程模型和状态管理模块的集成点"

AI响应:
任务已创建。请确认以下任务上下文：

任务目标：分析核心流程模型和状态管理模块的集成点
关注范围：
  - docs/PRD/modules/核心流程模型-PRD.md
  - docs/PRD/modules/状态管理模块-PRD.md
  - docs/architecture/iteration-1/核心流程模型-*.md
  - docs/architecture/iteration-1/状态管理模块-*.md
  - .solodev/state.json（moduleDependencies）

是否开始执行？
```

**`/expand-context` 使用示例**：

```
用户: /expand-context "读取iteration-0的架构设计作为参考"

AI响应:
上下文已扩展。本次任务将额外关注：
  - docs/architecture/iteration-0/
  - .solodev/state_his.json（iteration-0数据）

注意：此扩展仅对当前任务有效。
```

#### 4.2.4 任务聚焦的实现方式

**实现层次**：

```
┌─────────────────────────────────────────────────────────────────┐
│                     任务聚焦实现架构                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  【第1层：命令文件】                                              │
│  .claude/commands/start-architecture.md                         │
│    ├─ 任务目标（引导AI理解要做什么）                              │
│    ├─ 关注范围（引导AI读取什么）                                  │
│    ├─ 注意力边界（引导AI忽略什么）                                │
│    └─ 期望产出（引导AI输出什么）                                  │
│                                                                 │
│  【第2层：AI行为】                                                │
│  Claude CLI 读取命令文件后：                                      │
│    ├─ 理解任务目标                                               │
│    ├─ 主动读取"关注范围"中的文件                                  │
│    ├─ 避免主动读取"注意力边界"中的文件                            │
│    └─ 生成"期望产出"中定义的交付物                                │
│                                                                 │
│  【第3层：用户监督】                                              │
│  用户可通过以下方式调整AI行为：                                    │
│    ├─ /expand-context 临时扩展上下文                             │
│    ├─ /custom-task 创建自定义任务                                │
│    └─ 直接指示AI读取特定文件                                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**关键约束**：

1. **命令文件是唯一的聚焦定义源**：所有任务聚焦规则通过命令文件定义，不在代码中硬编码
2. **AI保留判断能力**：注意力边界是"引导"而非"禁止"，AI可根据实际需要读取边界外内容
3. **用户保留控制权**：用户可随时通过逃逸命令或直接指示调整AI行为

### 4.3 五阶段流程概览

| 阶段         | 主要产物                     | 审批要求 | 详细说明                              |
| ------------ | ---------------------------- | -------- | ------------------------------------- |
| **需求分析** | PRD（全局 + 模块）、用户故事 | 需要审批 | 各模块详细需求见 docs/PRD/modules/    |
| **架构设计** | 架构文档、技术选型、数据模型 | 需要审批 | 各模块详细架构见 docs/architecture/   |
| **代码实现** | 源代码、单元测试             | 自动验证 | 单元测试覆盖率100%（强制）            |
| **测试验证** | E2E测试、性能测试、混沌测试  | 需要审批 | 测试文档审批，测试代码自动生成        |
| **部署**     | 部署文档、CI/CD配置          | 需要审批 | 部署方案审批，部署操作需人工执行      |

---

## 五、整体用户故事清单

### 5.1 端到端核心流程

#### 故事 1：从零开始创建新项目

```
作为超级个体开发者，我想快速初始化一个新项目并完成首个迭代，以便交付MVP。

验收标准：
  - [ ] 执行 /init 初始化项目结构（.solodev/, docs/, 模板文件）
  - [ ] 执行 /new-iteration "MVP目标" 创建第一个迭代
  - [ ] 执行 /start-requirements 开始需求澄清
  - [ ] AI 逐个模块澄清需求，生成全局PRD + 各模块PRD
  - [ ] 审批PRD后，执行 /start-architecture 生成架构文档
  - [ ] 审批架构后，执行 /start-implementation 生成代码
  - [ ] 单元测试自动验证通过（100%覆盖率）
  - [ ] 执行 /start-testing 生成E2E/性能/混沌测试
  - [ ] 所有测试通过
  - [ ] 执行 /start-deployment 生成部署文档并部署
  - [ ] 自动创建Git Tag (v1.0)
  - [ ] 迭代数据迁移到 state_his.json
```

#### 故事 2：跨会话持续开发

```
作为超级个体开发者，我想分多天、多次会话完成一个迭代，以便灵活安排时间。

验收标准：
  - [ ] 第1次会话：完成3个模块的需求澄清，中断
  - [ ] 第2次会话：AI自动提示"上次完成了X、Y、Z模块，待澄清模块还有..."
  - [ ] 继续澄清剩余模块，完成PRD
  - [ ] 第3次会话：审批PRD，开始架构设计
  - [ ] 每次会话开始，AI都能准确恢复上次进度
  - [ ] state.json实时记录所有状态变更
  - [ ] Git commit记录每次状态变更
```

#### 故事 3：需求变更影响分析与回滚

```
作为超级个体开发者，我想在测试阶段发现需求问题时，自动分析影响并回滚到需求阶段，以便修正问题。

验收标准：
  - [ ] Testing阶段E2E测试失败
  - [ ] 执行 /report-issue "支付退款流程测试失败"
  - [ ] AI执行分层分析：
      - 根因：需求未定义退款后订单状态
      - 受影响模块：支付模块（直接）、订单模块（依赖）
      - 受影响产物：PRD、架构文档、代码、测试
  - [ ] AI生成待办任务列表（7个任务）
  - [ ] 展示影响分析报告，等待确认
  - [ ] 执行 /confirm-change 后：
      - 支付模块回滚到 requirements 阶段
      - 订单模块回滚到 architecture 阶段
      - 待办任务进入 globalTasks.pending
  - [ ] Git commit记录回滚操作
  - [ ] 重新执行需求澄清 → 架构设计 → 实现 → 测试
```

### 5.2 模块级核心流程

#### 故事 4：模块化需求澄清

```
作为超级个体开发者，我想逐个模块澄清需求，以便深入理解每个模块的职责。

验收标准：
  - [ ] 执行 /start-requirements 后，AI根据模块依赖关系建议优先澄清的模块
  - [ ] 每个模块独立澄清（AI提问 → 人类回答 → AI确认理解）
  - [ ] 每完成一个模块澄清，AI生成该模块的PRD文档（docs/PRD/modules/[模块名]-PRD.md）
  - [ ] 模块状态更新为 approved，立即Git commit
  - [ ] 所有模块澄清完成后，AI生成全局PRD（整合各模块的整体视角）
  - [ ] 等待人类审批全局PRD + 各模块PRD
```

#### 故事 5：基于PRD生成架构文档

```
作为超级个体开发者，我想基于审批后的PRD自动生成架构文档，以便快速完成设计。

验收标准：
  - [ ] 执行 /start-architecture 后，AI读取全局PRD和各模块PRD
  - [ ] AI自动生成架构文档：
      - 00-系统架构总览.md（模块职责、技术架构、部署架构）
      - 01-技术选型.md（Markdown+JSON+Git+Claude CLI）
      - 命令设计.md（命令清单、执行流程、返回值）
      - 数据模型设计.md（state.json和state_his.json完整Schema）
      - 集成-[模块名].md（复杂集成的详细设计）
  - [ ] AI自动推断模块间集成点，提交审批
  - [ ] 等待人类审批架构文档
  - [ ] 审批通过后，AI同步integrationPoints到state.json
  - [ ] Git commit记录架构设计完成
```

### 5.3 状态管理与版本管理

#### 故事 6：实时状态查询

```
作为超级个体开发者，我想随时查看项目状态，以便掌握进度。

验收标准：
  - [ ] 执行 /status 显示：
      - 当前迭代：iteration-1 (v1.0)
      - 当前阶段：architecture
      - 各模块状态：
          - 核心流程模型：requirements ✓, architecture ✓
          - 状态管理模块：requirements ✓, architecture (in_progress)
          - ...
      - 待审批项：架构文档-状态管理模块
      - 待办任务：0个
      - 最近Git commit："docs(architecture): 完成系统架构总览"
  - [ ] AI建议下一步行动："等待审批 架构文档-状态管理模块"
```

#### 故事 7：迭代完成与数据归档

```
作为超级个体开发者，我想完成迭代后自动归档数据，以便保持state.json轻量级。

验收标准：
  - [ ] 所有阶段完成（requirements/architecture/implementation/testing/deployment）
  - [ ] 执行 /complete-iteration
  - [ ] AI验证部署成功（deployedAt != null）
  - [ ] AI自动创建Git Tag (v1.0)
  - [ ] AI从state.json提取iteration-1的完整数据
  - [ ] AI写入state_his.json的completedIterations["iteration-1"]
  - [ ] AI清理state.json：删除iteration-1、清空completed tasks、清空changeHistory
  - [ ] Git commit记录迭代归档
  - [ ] state.json文件大小 < 100KB
```

---

## 六、迭代规划

### 6.1 Iteration 1 (v1.0 - MVP)

**目标**：完成AI超级个体开发助手的核心工具实现

**功能范围**：
- 核心流程模型（双层迭代、五阶段流转、反馈循环）
- 状态管理模块（state.json + state_his.json）
- 命令体系模块（Slash Commands）
- 影响分析模块（依赖分析、根因分析、待办任务生成）
- 文档模板模块（PRD/架构/测试/部署模板）
- 测试验证模块（单元/E2E/性能/混沌测试）
- Git集成模块（自动commit、版本Tag）

**验收标准**：
- [ ] 所有模块的PRD文档已完成（全局PRD + 7个模块PRD）
- [ ] 所有模块的架构文档已完成
- [ ] 所有模块的代码实现完成，单元测试覆盖率100%
- [ ] E2E测试、性能测试、混沌测试全部通过
- [ ] 部署文档已生成，可部署到生产环境
- [ ] 创建Git Tag v1.0

---

**详细模块需求请参考**：docs/PRD/modules/[模块名]-PRD.md
